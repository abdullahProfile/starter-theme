<style>
  .image-with-text-{{ section.id }} {
    --flex-direction: {{ section.settings.flex_direction }};
    --flex-direction-mobile: {{ section.settings.flex_direction_mobile }};
    --align-items: {{ section.settings.align_items }};
    --justify-content: {{ section.settings.justify_content }};
    --gap: {{ section.settings.gap }}px;
    --section-margin-block: {{ section.settings.section_margin_block }}px;
    --image-width: {{ section.settings.image_width }}px;
    --image-radius: {{ section.settings.image_border_radius }}px;
    --image-fit: {{ section.settings.image_object_fit }};
    --image-mbl-width: {{ section.settings.image_width_mbl }}%;
    --content-width: {{ section.settings.text_content_width }}px;
    --section-mb-mobile: {{ section.settings.section_margin_block_mobile }}px;
  }

  {% for block in section.blocks %}

    {% if block.type == 'heading' %}

      .heading-{{ block.id }} {
        font-size: {{ block.settings.heading_size }}px;
        color: {{ block.settings.heading_font_color }};
        font-weight: {{ block.settings.heading_font_weight }};
        margin: 0;
      }

    {% endif %}
  {% endfor %}


  {% for block in section.blocks %}
    {% if block.type == 'text' %}

      .description-{{ block.id }} {
        font-size: {{ block.settings.description_font_size }}px;
        color: {{ block.settings.description_font_color }};
        line-height: {{ block.settings.description_line_height }};
        margin: 0;
      }
    {% endif %}
  {% endfor %}


  {% for block in section.blocks %}
    {% if block.type == 'button' %}
        .button-{{ block.id }} {
          background: {{ block.settings.button_background }};
          color: {{ block.settings.button_font_color }};
          padding: {{ block.settings.button_padding_block }}px {{ block.settings.button_padding_inline }}px;
          font-size: {{ block.settings.button_font_size }}px;
          font-weight: {{ block.settings.button_font_weight }};
          border-radius: {{ block.settings.button_border_radius }}px;
          text-decoration: {{ block.settings.button_text_decoration }};
          width: {{ block.settings.button_width }}px;
          display: inline-block;
          text-align: {{ block.settings.button_text_align }};
          transition: all 0.3s ease-in;
      }

      {% if block.settings.ishover == true %}

        .button-{{ block.id }}:hover {
          background: {{ block.settings.button_hover_bg }};
          color: {{ block.settings.button_hover_text_color }};
        }

      {% endif %}

      .button-container-{{ block.id }} {
        display: flex;
        justify-content: {% if block.settings.button_alignment == 'center' %}center
        {% elsif block.settings.button_alignment == 'left' %}flex-start
        {% else %}flex-end
      {% endif %}
    }

    {% endif %}
  {% endfor %}


  @media (max-width: 768px) {
    .image-with-text-{{ section.id }} {
      margin-block: var(--section-mb-mobile);
    }

  .image-with-text-{{ section.id }} .container {
    flex-direction: var(--flex-direction-mobile);
  }

  .image-with-text-{{ section.id }} .image {
    max-width: var(--img-mbl-width);
  }

  .image-with-text-{{ section.id }} .content {

    {% if section.settings.text_align_mobile == true %}
      align-items: center;
      text-align: center;
    {% endif %}

  }

  {% for block in section.blocks %}
    {% if block.type == 'heading' %}

      .heading-{{ block.id }} {
        font-size: clamp(14px, 4vw, {{ block.settings.heading_size_mobile }}px);
      }

    {% endif %}

    {% if block.type == 'text' %}
      .description-{{ block.id }} {
        font-size: clamp(12px, 3.5vw, {{ block.settings.description_font_size_mobile }}px);
      }
    {% endif %}

    {% if block.type =='button' %}

      .button-{{ block.id }} {
        padding: clamp(10px, {{ block.settings.button_padding_block }}px, 40px);
        font-size: clamp(10px, 4vw, {{ block.settings.button_font_size }}px);
      }

      {% endif %}
  {% endfor %}
}
</style>

{% stylesheet %}
  .container {
    display: flex;
    flex-direction: var(--flex-direction);
    align-items: var(--align-items);
    justify-content: var(--justify-content);
    gap: var(--gap);
    margin-inline: 0;
    margin-block: var(--section-margin-block);
  }

  .image {
    width: 100%;
    max-width: var(--image-width);
    overflow: hidden;
    flex-shrink: 0;
  }

  .image img {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: var(--image-fit);
    border-radius: var(--image-radius);
  }

  .content {
    max-width: var(--content-width);
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

{% endstylesheet %}

<section class="image-with-text image-with-text-{{ section.id }}">
  <div class="container">

    <div class="image">
      {% if section.settings.image != blank %}
        {{ section.settings.image | image_url: width: 800 | image_tag }}
      {% else %}
        <div class="placeholder">
          {{ 'image' | placeholder_svg_tag: 'placeholder' }}
        </div>
      {% endif %}
    </div>

    <div class="content">
      {% for block in section.blocks %}
        {% case block.type %}

        {% when 'heading' %}
          <{{ block.settings.heading_tag }}
            class="heading heading-{{ block.id }}"
            {{ block.shopify_attributes }}
          >
            {{ block.settings.heading }}
          </{{ block.settings.heading_tag }}>

        {% when 'text' %}
          <p class="description description-{{ block.id }}" {{ block.shopify_attributes }}>
            {{ block.settings.description }}
          </p>

        {% when 'button' %}
          {% if block.settings.button_text != blank %}

          <div class="button-container-{{ block.id }}">
            <a href="{{ block.settings.button_link }}" class="button button-{{ block.id }}" {{ block.shopify_attributes }}>
              {{ block.settings.button_text }}
            </a>
          </div>

          {% endif %}

        {% endcase %}
      {% endfor %}
    </div>

  </div>
</section>


{% schema %}
{
  "name": "Image with Text",
  "tag": "section",
  "class": "section",

  "settings": [
    {
      "type": "header",
      "content": "Image Settings"
    },

    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },

    {
      "type": "range",
      "id": "image_width",
      "label": "Image Width",
      "min": 100,
      "max": 1000,
      "step": 10,
      "unit": "px",
      "default": 350
    },

    {
      "type": "range",
      "id": "image_width_mbl",
      "label": "image width on mobile (Recommended 100%)",
      "min": 10,
      "max": 100,
      "step": 10,
      "unit": "%",
      "default": 100
    },

    {
      "type": "number",
      "id": "image_border_radius",
      "label": "Image Border Radius",
      "default": 0
    },

    {
      "type": "select",
      "id": "image_object_fit",
      "label": "Image Object-Fit",

      "options": [
        { "value": "cover", "label": "Cover" },
        { "value": "fill", "label": "Fill" },
        { "value": "contain", "label": "Contain" }
      ],
      "default": "cover"
    },

    {
      "type": "header",
      "content": "Text Content Settings"
    },

    {
      "type": "number",
      "id": "text_content_width",
      "label": "Text Content Width",
      "default": 600
    },

    {
      "type": "checkbox",
      "id": "text_align_mobile",
      "label": "Center content on mobile",
      "default": true,
    },

    {
      "type": "header",
      "content": "Section Layout"
    },

    {
      "type": "range",
      "id": "section_margin_block",
      "label": "Section Margin Block",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "default": 0
    },

    {
      "type": "range",
      "id": "section_margin_block_mobile",
      "label": "Section Margin Block Mobile",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "default": 0
    },

    {
      "type": "select",
      "id": "flex_direction",
      "label": "Flex Direction",

      "options": [
        { "value": "row", "label": "Row" },
        { "value": "column", "label": "Column" },
        { "value": "row-reverse", "label": "Row Reverse" },
        { "value": "column-reverse", "label": "Column Reverse" }
      ],
      "default": "row"
    },

    {
      "type": "select",
      "id": "align_items",
      "label": "Align Items",

      "options": [
        { "value": "center", "label": "Center" },
        { "value": "start", "label": "Start" },
        { "value": "end", "label": "End" },
        {"value": "stretch", "label": "stretch"}
      ],

      "default": "center"
    },

    {
      "type": "select",
      "id": "justify_content",
      "label": "Justify Content",

      "options": [
        { "value": "center", "label": "Center" },
        { "value": "space-between", "label": "Space Between" },
        { "value": "space-evenly", "label": "Space Evenly" },
        { "value": "space-around", "label": "Space Around" }
      ],
      "default": "center"
    },

    {
      "type": "range",
      "id": "gap",
      "label": "Gap Between Items",
      "min": 10,
      "max": 80,
      "step": 5,
      "unit": "px",
      "default": 10
    },

    {
      "type": "select",
      "id": "flex_direction_mobile",
      "label": "Flex Direction on Mobile",

      "options": [
        { "value": "row", "label": "Row" },
        { "value": "column", "label": "Column" },
        { "value": "row-reverse", "label": "Row Reverse" },
        { "value": "column-reverse", "label": "Column Reverse" }
      ],
      "default": "column"
    }
  ],

  "blocks": [
    {
      "type": "heading",
      "name": "Heading",

      "settings": [

        { "type": "text", "id": "heading", "label": "Heading", "default": "Image with Text Heading" },

        {
          "type": "select",
          "id": "heading_tag",
          "label": "Heading Tag",

          "options": [
            { "value": "h1", "label": "H1" },
            { "value": "h2", "label": "H2" },
            { "value": "h3", "label": "H3" },
            { "value": "h4", "label": "H4" }
          ],
          "default": "h1"
        },

        {
          "type": "range",
          "id": "heading_size",
          "label": "Heading Font Size",
          "min": 16,
          "max": 64,
          "step": 2,
          "unit": "px",
          "default": 16
        },

        {
          "type": "range",
          "id": "heading_size_mobile",
          "label": "Heading Font Size Mobile",
          "min": 14,
          "max": 64,
          "step": 2,
          "unit": "px",
          "default": 16
        },

        { "type": "color", "id": "heading_font_color", "label": "Heading Font Color", "default": "#000" },

        {
          "type": "select",
          "id": "heading_font_weight",
          "label": "Heading Font Weight",

          "options": [
            { "value": "400", "label": "Regular" },
            { "value": "600", "label": "Medium" },
            { "value": "700", "label": "Bold" },
            { "value": "900", "label": "Extra Bold" }
          ],
          "default": "700"
        }
      ]
    },

    {
      "type": "text",
      "name": "Text",
      "limit": 2,

      "settings": [
        { "type": "text", "id": "description", "label": "Description", "default": "Image with Text Description" },

        {
          "type": "range",
          "id": "description_font_size",
          "label": "Description Font Size",
          "min": 14,
          "max": 48,
          "step": 2,
          "unit": "px",
          "default": 16
        },

        {
          "type": "range",
          "id": "description_font_size_mobile",
          "label": "Description Font Size Mobile",
          "min": 12,
          "max": 48,
          "step": 2,
          "unit": "px",
          "default": 16
        },

        { "type": "color", "id": "description_font_color", "label": "Description Font Color", "default": "#000" },

        {
          "type": "range",
          "id": "description_line_height",
          "label": "Line Height",
          "min": 1,
          "max": 2.5,
          "step": 0.1,
          "default": 1.6
        }
      ]
    },

    {
      "type": "button",
      "name": "Button",
      "limit": 2,

      "settings": [
        { "type": "text", "id": "button_text", "label": "Button Text", "default": "Shop Now" },
        { "type": "url", "id": "button_link", "label": "Button Link" },
        { "type": "number", "id": "button_width", "label": "Button Width", "default": 200 },

        {
          "type": "select",
          "id": "button_alignment",
          "label": "Button Alignment",

          "options": [
            { "value": "center", "label": "Center" },
            { "value": "left", "label": "Left" },
            { "value": "right", "label": "Right" }
          ],

          "default": "center"
        },

        {
          "type": "select",
          "id": "button_text_decoration",
          "label": "Text Decoration",

          "options": [
            { "value": "none", "label": "None" },
            { "value": "underline", "label": "Underline" },
            { "value": "line-through", "label": "Line Through" },
            { "value": "overline", "label": "Overline" }
          ],

          "default": "none"
        },

        { "type": "color", "id": "button_background", "label": "Background Color", "default": "#000" },

        {
          "type": "select",
          "id": "button_text_align",
          "label": "Text Align",

          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],

          "default": "center"
        },

        { "type": "number", "id": "button_padding_inline", "label": "Padding Inline", "default": 12 },
        { "type": "number", "id": "button_padding_block", "label": "Padding Block", "default": 10 },
        { "type": "number", "id": "button_font_size", "label": "Font Size", "default": 12 },

        {
          "type": "select",
          "id": "button_font_weight",
          "label": "Font Weight",

          "options": [
            { "value": "400", "label": "Regular" },
            { "value": "600", "label": "Medium" },
            { "value": "700", "label": "Bold" }
          ],

          "default": "600"
        },

        { "type": "color", "id": "button_font_color", "label": "Font Color", "default": "#fff" },

        { "type": "number", "id": "button_border_radius", "label": "Border Radius", "default": 10 },

        {
          "type": "header",
          "content": "Button Hover Setting"
        },

        {"type": "checkbox", "id": "ishover", "label": "Enable hover", "default": true},
        {"type": "color", "id": "button_hover_bg", "label": "Button Hover Background", "default": "#fff"},
        {"type": "color", "id": "button_hover_text_color", "label": "Button Hover Text Colors", "default": "#fff"},
      ]
    }
  ],

  "presets": [
    {
      "name": "Image with Text",
      "blocks": [
        { "type": "heading" },
        { "type": "text" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}
